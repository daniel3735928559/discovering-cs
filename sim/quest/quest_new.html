<div class="quest" ng-controller="QuestController">
  <div class="quest_main">
    <div class="quest_panel" ng-if="show_tutorial == true">
      <div class="quest_title">Questions</div>
      <div ng-repeat="p in quest.problems track by $index" ng-click="set_problem($index)" ng-class="'quest_problem_button ' + ($index == userdata.current_problem ? 'quest_current' : 'quest_other')" >
	{{p.id}}
      </div>
    </div>
    <div class="quest_description" ng-if="show_tutorial == true">
      <div class="quest_title">Problem description</div>
      <div ng-bind-html="get_html()"></div>
    </div>
    <div class="quest_simulator" ng-style="{'width':show_tutorial == true ? '' : '90%'}">
      <!-- <div ng-if="problems[current_problem].type == 'text'" id="super" ng-controller="TextController"> -->
      <!--   <div ng-include="'simpy.html'" ng-repeat="(simid,program) in {'big':'x = 2'}"> -->
      <!--   </div> -->
      <!-- </div> -->
      <!-- <div ng-if="problems[current_problem].type == 'avr'" id="super" ng-controller="AvrExplController"> -->
      <!--   <div ng-include="'simpy.html'" ng-repeat="(simid,program) in {'big':'x = 2'}"> -->
      <!--   </div> -->
      <!-- </div> -->
      <!-- ABC: {{userdata.programs[userdata.current_problem]}} -->
      <div class="quest_title">Workspace (<a href="#" ng-click="toggle_tutorial();alert('as');">Toggle questions</a>)</div>
      <div ng-if="quest.problems[userdata.current_problem].type == 'python'" id="super" ng-controller="PySimController">
	<sim-py program="quest.programs[userdata.current_problem]" control="pycontrol" size="" lightboard="yes" reset="yes" simid="big" template="/lib/spy/simpy.html"></sim-py>
      </div>
      <div ng-if="quest.problems[userdata.current_problem].type == 'avr'" id="super" ng-controller="AvrSimController">
	<sim-avr program="quest.programs[userdata.current_problem]" control="avrcontrol" simid="big" template="/lib/jsavr/simavr.html"></sim-avr>
      </div>
    </div>
  </div>
</div>
